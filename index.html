<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Project Presentation</title>
    <style>
        body {
            margin: 20px; /* Adjust the margin size as needed */
            font-family: Arial, sans-serif; /* Sets a nice readable font */
        }
        iframe {
            width: 100%; /* Ensures iframes take full width of their container */
            border: none; /* Removes border around iframes */
        }
    </style>
</head>
<body>
    <h4>Group Member: You Peng, Veeresh Kande, Mengke Wu, Prathyush Bhamidipati</h4>

    <h1>Introduction</h1>
    <p><strong>Name:</strong> Enrollment Database</p>
    <p><strong>Source:</strong> New York State Education Department (NYSED)</p>
    <p><strong>Overview:</strong> 4 datasets inside the package, each focuses on an aspect of the enrollment and can be joined by corresponding keys</p>
    <p><strong>Time:</strong> 2021 to 2023</p>
    <p><strong>Details:</strong></p>
    <ul>
        <li><code>BEDS Day Enrollment.csv</code> - enrollment numbers by grades in each school for 3 years;</li>
        <li><code>BOCES and N:RC.csv</code> - category and location information for each school for 3 years;</li>
        <li><code>Demographic Factors.csv</code> - demographic information for each school for 3 years;</li>
        <li><code>Institution Grouping.csv</code> - group information for each school;</li>
    </ul>
    <p><strong>Audience:</strong> The potential audience could include education policymakers, school administrators, researchers, and analysts interested in understanding enrollment trends, demographic factors, and institutional groupings within New York State schools.</p>

    <h2>Plot Topic 1 - Demographic</h2>
    <h3>Gender Distribution</h3>
    <p>Description: Explore the distribution of genders by year via these interactive graphs. The bar chart is embedded with a dropdown selection of years, enabling the review of the proportion of male and female students enrolled in each year.</p>
    <iframe src="https://youpeng0630.github.io/445final/gender.html" height="600"></iframe>

    <h3>Race Distribution</h3>
    <h4>Plot 1</h4>
    <p>Description: The bar chart is embedded with a dropdown selection of years, enabling the review of the proportion of students enrolled in different races in each year.</p>
    <iframe src="https://youpeng0630.github.io/445final/race.html" height="600"></iframe>

    <h4>Plot 2</h4>
    <p>Description: This plot provides a visual representation of the demographic distribution of students across various regions of the county. The data is segmented into several key demographic factors including age, ethnicity, and economic status. The visualization is designed to highlight areas with high concentrations of diverse populations and identify potential disparities in educational resource allocation.</p>
    <iframe src="https://youpeng0630.github.io/445final/log_NUM_BLACK.html" height="600"></iframe>
    <iframe src="https://youpeng0630.github.io/445final/log_NUM_ASIAN.html" height="600"></iframe>
    <iframe src="https://youpeng0630.github.io/445final/log_NUM_WHITE.html" height="600"></iframe>

    <h2>Plot Topic 2 - Enrollment</h2>
    <h3>Enrollment by County across Years</h3>
    <p>Description: This bar chart represents an interactive visualization detailing enrollment trends by grade across different counties and years. It utilizes Altair to create a bar chart that displays the total number of students enrolled in each grade from 1 to 12. Users can interact with the visualization through a dropdown menu that combines both county and year into a single filter, allowing for dynamic and specific querying of enrollment data. Each bar represents a grade, and its height indicates the total student enrollment for that grade, as filtered by the selected county-year combination.</p>
    <iframe src="https://youpeng0630.github.io/445final/enrollment_trends_by_grade.html" height="600"></iframe>

    <h2>Plot Topic 3 - School Distribution</h2>
    <h3>School Distribution Across Counties in New York City</h3>
    <h4>Plot 1</h4>
    <p>The plot presents the overall distribution of schools by each county in New York State. By clicking, the selected bar (i.e. a county) will be highlighted and the exact amount of schools in that county will show. This interaction gives more details for the distribution.</p>
    <iframe src="https://youpeng0630.github.io/445final/school_count.html" height="500"></iframe>

    <h4>Plot 2</h4>
    <p>More specifically, the slider enables the selection of the desired number of schools to display, and only counties meeting that criteria will be highlighted on the map. Discover the concentration of educational institutions in different areas of the city at a glance.</p>
    <iframe src="https://youpeng0630.github.io/445final/youpeng.html" height="600"></iframe>
    <button onclick="fetchCSV()">Refresh</button>
    <br></br>
    <table id="csvData">
        <thead>
            <tr>
                <th>Column1</th>
                <th>Column2</th>
                <th>Column3</th>
                <!-- Add more columns as needed -->
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script>
    function fetchCSV() {
        // Path relative to the HTML file or absolute path in the same repository
        const url = './BEDS_Day_Enrollment.csv';  // Adjust the path as necessary
    
        fetch(url)
            .then(response => response.text())
            .then(csvString => {
                // Use PapaParse to convert string to array of objects
                const data = Papa.parse(csvString, {
                    header: true,
                    skipEmptyLines: true
                }).data;
    
                // Display the top 5 rows
                displayData(data.slice(0, 5));
            })
            .catch(error => console.error('Error fetching CSV:', error));
    }
    
    function displayData(data) {
        const tableBody = document.getElementById('csvData').getElementsByTagName('tbody')[0];
        tableBody.innerHTML = ''; // Clear previous data
    
        // Append new rows
        data.forEach(row => {
            const tr = document.createElement('tr');
            Object.values(row).forEach(text => {
                const td = document.createElement('td');
                td.textContent = text;
                tr.appendChild(td);
            });
            tableBody.appendChild(tr);
        });
    }
    
    window.onload = function() {
        fetchCSV(); // Fetch CSV when the page loads
    };
    </script>
    
</body>
</html>
